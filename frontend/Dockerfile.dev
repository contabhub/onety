# Dockerfile para desenvolvimento
FROM node:20-alpine

# Instalar dependências do sistema
RUN apk add --no-cache libc6-compat

# Definir diretório de trabalho
WORKDIR /app

# Copiar arquivos de dependência
COPY package.json package-lock.json* ./

# Instalar dependências (incluindo dev)
RUN npm ci

# Copiar o restante do código
COPY . .

# Expor porta do Next.js
EXPOSE 3000

# Variáveis de ambiente
ENV NODE_ENV=development
ENV NEXT_TELEMETRY_DISABLED=1

# Receber argumentos de build (opcional em dev, mas mantém consistência)
ARG NEXT_PUBLIC_API_URL
ARG NEXT_PUBLIC_WS_URL
ENV NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL
ENV NEXT_PUBLIC_WS_URL=$NEXT_PUBLIC_WS_URL

# Executar em modo desenvolvimento com hot reload
CMD ["npm", "run", "dev"]

